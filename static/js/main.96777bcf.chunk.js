(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,i){e.exports=i(36)},27:function(e,t,i){},29:function(e,t,i){},36:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),r=i(16),s=i.n(r),o=(i(27),i(1)),c=i(2),l=i(4),p=i(3),u=i(5),m=(i(29),i(8)),d=i(9),h=i(20),v=i(21),E=i.n(v),y=i(7),f={movieList:[],candidate:{}},T=Object(d.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,i=e.movieList.slice();switch(t.type){case"NEW_MOVIE":return i.push(t.payload),Object(y.a)({},e,{movieList:i});case"DELETE_MOVIE":return i.splice(t.payload,1),Object(y.a)({},e,{movieList:i});case"EDIT_CANDIDATE":return Object(y.a)({},e,{candidate:t.payload});case"ADD_CANDIDATE":return i.push(e.candidate),{movieList:i,candidate:{}};case"INSERT_CANDIDATE":return i[t.payload]=e.candidate,{movieList:i,candidate:{}};default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_LOADING":return!e;default:return e}},editSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_SELECTED":return t.payload;case"EDIT_UNSELECTED":return-1;default:return e}},deleteSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_SELECTED":return t.payload;case"DELETE_UNSELECTED":return-1;default:return e}},newMovie:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_NEW_MOVIE":return!e;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return t.payload;case"UNSET_ERROR":return"";default:return e}}}),b=[h.a,E.a],g=Object(d.d)(T,{movies:{movieList:[],candidate:{}},loading:!1,editSelected:-1,newMovie:!1,deleteSelected:-1,error:""},d.a.apply(void 0,b)),C=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.myID=this.props.id,this.myTitle=this.props.movie.Title,this.myYear=this.props.movie.Year,this.myTime=this.props.movie.Runtime,this.myGenre=this.props.movie.Genre.substring(0,15),this.myDir=this.props.movie.Director.substring(0,15),a.a.createElement("div",{className:"MovieTabHolder"},a.a.createElement("div",{className:"MovieTabContainer",onClick:this.props.editClick},a.a.createElement("div",{className:"MovieTabPairContainer"},a.a.createElement("div",{className:"MovieColRight"},a.a.createElement("span",null,"ID: "),a.a.createElement("span",null,"Title: ")),a.a.createElement("div",{className:"MovieColLeft"},a.a.createElement("span",null,this.myID),a.a.createElement("span",null,this.myTitle))),a.a.createElement("div",{className:"MovieTabPairContainer"},a.a.createElement("div",{className:"MovieColRight"},a.a.createElement("span",null,"Year: "),a.a.createElement("span",null,"Runtime: ")),a.a.createElement("div",{className:"MovieColLeft"},a.a.createElement("span",null,this.myYear),a.a.createElement("span",null,this.myTime))),a.a.createElement("div",{className:"MovieTabPairContainer"},a.a.createElement("div",{className:"MovieColRight"},a.a.createElement("span",null,"Genre: "),a.a.createElement("span",null,"Director: ")),a.a.createElement("div",{className:"MovieColLeft"},a.a.createElement("span",null,this.myGenre),a.a.createElement("span",null,this.myDir)))),a.a.createElement("div",{className:"deleteBar",onClick:this.props.deleteClick},a.a.createElement("img",{alt:"delete",src:"https://ubisafe.org/images/can-vector-icon-4.png"})))}}]),t}(n.Component),O=function(e){return function(t){t({type:"EDIT_CANDIDATE",payload:e})}},D=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"selectTabEdit",value:function(e){var t=this;return function(){console.log("clicked tab: "+e+"!"),function(e,t){return function(i){i({type:"EDIT_SELECTED",payload:e}),O(t)(i)}}(e,t.props.movies.movieList[e])(t.props.dispatch)}}},{key:"selectTabDelete",value:function(e){var t=this;return function(){console.log("delete tab: "+e+"!"),function(e){return function(t){t({type:"DELETE_SELECTED",payload:e})}}(e)(t.props.dispatch)}}},{key:"renderTabs",value:function(){var e=this;return console.log("renderTabs: "+this.props.movies),this.props.movies.movieList.map(function(t,i){return console.log("rendering tab: "+t.Title),a.a.createElement(C,{key:i,id:i,movie:t,editClick:e.selectTabEdit(i),deleteClick:e.selectTabDelete(i)})})}},{key:"renderLoadTab",value:function(){if(this.props.loading)return a.a.createElement("div",{className:"MovieTabContainer"},a.a.createElement("img",{alt:"",src:"https://loading.io/spinners/curve-bars/index.curved-bar-spinner.svg"}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"MovieListContainer"},this.renderTabs(),this.renderLoadTab())}}]),t}(n.Component),N=Object(m.b)(function(e){return Object(y.a)({},e)},null)(D),k=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"fixTitle",value:function(e){return e.split("").filter(function(e){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ".indexOf(e)>=0}).join("").toLowerCase().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")}},{key:"editTitle",value:function(e){this.myTitle=this.fixTitle(e),this.props.changeThings(this.myMovie())}},{key:"editYear",value:function(e){this.myYear=e,this.props.changeThings(this.myMovie())}},{key:"editTime",value:function(e){this.myTime=e,this.props.changeThings(this.myMovie())}},{key:"editGenre",value:function(e){this.myGenre=e,this.props.changeThings(this.myMovie())}},{key:"editDirector",value:function(e){this.myDir=e,this.props.changeThings(this.myMovie())}},{key:"myMovie",value:function(){return{Title:this.myTitle,Year:this.myYear,Runtime:this.myTime,Genre:this.myGenre,Director:this.myDir}}},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"render",value:function(){var e=this;return console.log("movie keys: "+Object.keys(this.props.movie)),this.myID=this.props.id,this.myTitle="",this.myYear="",this.myTime="",this.myGenre="",this.myDir="",this.props.movie&&!this.isEmpty(this.props.movie)&&(this.myTitle=this.props.movie.Title,this.myYear=this.props.movie.Year,this.myTime=this.props.movie.Runtime,this.myGenre=this.props.movie.Genre.substring(0,15),this.myDir=this.props.movie.Director.substring(0,15)),a.a.createElement("div",{className:"MoviePopup"},a.a.createElement("div",{className:"MovieTabPairContainer"},a.a.createElement("div",{className:"MovieColRight"},a.a.createElement("span",null,"ID: "),a.a.createElement("span",null,"Title: ")),a.a.createElement("div",{className:"MovieColLeft"},a.a.createElement("span",null,this.myID),a.a.createElement("input",{type:"text",value:this.myTitle,onChange:function(t){return e.editTitle(t.target.value)}}))),a.a.createElement("div",{className:"MovieTabPairContainer"},a.a.createElement("div",{className:"MovieColRight"},a.a.createElement("span",null,"Year: "),a.a.createElement("span",null,"Runtime: ")),a.a.createElement("div",{className:"MovieColLeft"},a.a.createElement("input",{type:"text",value:this.myYear,onChange:function(t){return e.editYear(t.target.value)}}),a.a.createElement("input",{type:"text",value:this.myTime,onChange:function(t){return e.editTime(t.target.value)}}))),a.a.createElement("div",{className:"MovieTabPairContainer"},a.a.createElement("div",{className:"MovieColRight"},a.a.createElement("span",null,"Genre: "),a.a.createElement("span",null,"Director: ")),a.a.createElement("div",{className:"MovieColLeft"},a.a.createElement("input",{type:"text",value:this.myGenre,onChange:function(t){return e.editGenre(t.target.value)}}),a.a.createElement("input",{type:"text",value:this.myDir,onChange:function(t){return e.editDirector(t.target.value)}}))))}}]),t}(n.Component),j=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"MoviePopup"},a.a.createElement("h3",null,"Are you sure you want to delete ",this.props.movie,"?"))}}]),t}(n.Component),M=function(){return function(e){e({type:"TOGGLE_NEW_MOVIE"}),O({})(e)}},L=function(e){return function(t){t({type:"SET_ERROR",payload:e})}},w=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"isValidYear",value:function(e){var t=!0;return e.split("").forEach(function(e){"0123456789".indexOf(e)<0&&(t=!1)}),t}},{key:"isCandidateValid",value:function(){var e=this,t="yes";return this.props.movies.candidate.Title||(t="Error, movie title field is empty"),this.props.movies.candidate.Year||(t="Error, movie release year field is empty"),this.props.movies.candidate.Runtime||(t="Error, movie runtime field is empty"),this.props.movies.candidate.Genre||(t="Error, movie genre field is empty"),this.props.movies.candidate.Director||(t="Error, movie director field is empty"),this.props.movies.movieList.forEach(function(i,n){i.Title===e.props.movies.candidate.Title&&n!==e.props.editSelected&&(t="Error, movie title already taken")}),this.isValidYear(this.props.movies.candidate.Year)||(t="Error, release year not valid"),t}},{key:"okOnClick",value:function(){var e,t,i="";-1!==this.props.editSelected&&("yes"===(i=this.isCandidateValid())?(e=this.props.editSelected,function(t){t({type:"INSERT_CANDIDATE",payload:e}),function(e){e({type:"EDIT_UNSELECTED"})}(t)})(this.props.dispatch):L(i)(this.props.dispatch)),this.props.newMovie&&(i=this.isCandidateValid(),console.log("is candidate valid? "+i),"yes"===i?((t=this.props.dispatch)({type:"ADD_CANDIDATE"}),M()(t)):L(i)(this.props.dispatch)),-1!==this.props.deleteSelected&&function(e){return function(t){t({type:"DELETE_MOVIE",payload:e}),t({type:"DELETE_UNSELECTED"})}}(this.props.deleteSelected)(this.props.dispatch)}},{key:"cancelOnClick",value:function(){-1!==this.props.editSelected&&(0,this.props.dispatch)({type:"EDIT_UNSELECTED"}),this.props.newMovie&&M()(this.props.dispatch),-1!==this.props.deleteSelected&&function(e){e({type:"DELETE_UNSELECTED"})}(this.props.dispatch)}},{key:"getButtons",value:function(){var e=this;return a.a.createElement("div",{className:"MovieTabPairContainer"},a.a.createElement("button",{className:"btn",onClick:function(){return e.okOnClick()}},"Okay"),a.a.createElement("button",{className:"btn",onClick:function(){return e.cancelOnClick()}},"Cancel"))}},{key:"render",value:function(){var e=this;return-1!==this.props.editSelected?a.a.createElement("div",{className:"PopupContainer"},a.a.createElement("div",{className:"MoviePopupHolder"},a.a.createElement(k,{id:this.props.editSelected,movie:this.props.movies.candidate,changeThings:function(t){return O(t)(e.props.dispatch)}}),this.getButtons())):this.props.newMovie?a.a.createElement("div",{className:"PopupContainer"},a.a.createElement("div",{className:"MoviePopupHolder"},a.a.createElement(k,{id:this.props.movies.movieList.length,movie:this.props.movies.candidate,changeThings:function(t){return O(t)(e.props.dispatch)}}),this.getButtons())):-1!==this.props.deleteSelected?a.a.createElement("div",{className:"PopupContainer"},a.a.createElement("div",{className:"MoviePopupHolder"},a.a.createElement(j,{movie:this.props.movies.movieList[this.props.deleteSelected].Title}),this.getButtons())):null}}]),t}(n.Component),S=Object(m.b)(function(e){return Object(y.a)({},e)},null)(w),I=i(10),_=i.n(I),R=i(14),G=function(){return function(e){console.log("toggling load"),e({type:"TOGGLE_LOADING"})}},A=function(e){return function(t){t({type:"NEW_MOVIE",payload:e})}},P=function(){var e=Object(R.a)(_.a.mark(function e(t,i){var n,a,r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching movie: "+i),n="https://www.omdbapi.com/?apikey=4834ebc9&t="+i.replace(" ","+"),e.next=4,fetch(n);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,A(r)(t);case 9:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}(),Y=function(){var e=Object(R.a)(_.a.mark(function e(t,i){var n,a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchMovies"),e.next=3,fetch("https://www.omdbapi.com/?apikey=4834ebc9&s="+i.replace(" ","+"));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,G()(t),a.Search.forEach(function(e){P(t,e.Title)}),G()(t);case 10:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}(),x=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return console.log("error popup says, error is: "+this.props.error),this.props.error?a.a.createElement("div",{className:"PopupContainer"},a.a.createElement("div",{className:"MoviePopupHolder",id:"error"},a.a.createElement("div",{className:"MoviePopup",id:"error"},a.a.createElement("span",{className:"error"},this.props.error)),a.a.createElement("button",{className:"btn",onClick:function(){(0,e.props.dispatch)({type:"UNSET_ERROR"})}},"Ok"))):null}}]),t}(n.Component),V=Object(m.b)(function(e){return Object(y.a)({},e)},null)(x),U=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Y(g.dispatch,"movie")}},{key:"render",value:function(){return a.a.createElement(m.a,{store:g},a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("h1",null,"Welcome to Herolo Cinema!")),a.a.createElement(N,null),a.a.createElement("button",{className:"btn",onClick:function(){return M()(g.dispatch)}},"New Movie"),a.a.createElement(S,null),a.a.createElement(V,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.96777bcf.chunk.js.map